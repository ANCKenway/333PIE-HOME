<!DOCTYPE html><!DOCTYPE html>

<html lang="fr"><html lang="fr">

<head><head>

    <meta charset="UTF-8">    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>333HOME - Gestion Domotique</title>    <title>333HOME - Gestion de Parc Informatique</title>

        <link rel="icon" href="/favicon.svg" type="image/svg+xml">

    <!-- Tailwind CSS -->    <link rel="stylesheet" href="/static/css/main.css">

    <script src="https://cdn.tailwindcss.com"></script>    <script src="/app-simple.js" defer></script>

    </head>

    <!-- Alpine.js --><body>

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>    <div class="app-layout">

            <!-- Menu mobile hamburger -->

    <style>        <button class="mobile-menu-btn" id="mobile-menu-btn">

        [x-cloak] { display: none !important; }            <span class="hamburger-line"></span>

    </style>            <span class="hamburger-line"></span>

</head>            <span class="hamburger-line"></span>

<body class="bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 min-h-screen" x-data="app()" x-init="init()">        </button>

    

    <!-- Layout Principal -->        <!-- Overlay mobile -->

    <div class="flex min-h-screen">        <div class="mobile-overlay" id="mobile-overlay"></div>

        

        <!-- Sidebar -->        <!-- Sidebar -->

        <aside class="w-72 bg-gray-900/95 backdrop-blur-xl text-white shadow-2xl border-r border-white/10">        <aside class="sidebar" id="sidebar">

            <div class="p-6 border-b border-white/10">            <div class="sidebar-header">

                <h1 class="text-2xl font-bold bg-gradient-to-r from-indigo-400 to-pink-400 bg-clip-text text-transparent">                <h1>ğŸ  333HOME</h1>

                    ğŸ  333HOME                <div class="status-indicator" id="status-indicator">âš¡ En ligne</div>

                </h1>            </div>

                <p class="text-sm text-gray-400 mt-1">v6.0 - Alpine + Tailwind</p>            

            </div>            <nav class="sidebar-nav">

                            <button class="nav-btn active" data-tab="status">

            <nav class="p-4 space-y-2">                    <span class="nav-icon">ğŸ“Š</span>

                <template x-for="tab in tabs" :key="tab.id">                    <span class="nav-text">Statut</span>

                    <button                 </button>

                        @click="switchTab(tab.id)"                <button class="nav-btn" data-tab="devices">

                        :class="currentTab === tab.id ? 'bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg' : 'text-gray-400 hover:text-white hover:bg-white/5'"                    <span class="nav-icon">ğŸ“±</span>

                        class="w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 font-medium"                    <span class="nav-text">Appareils</span>

                    >                </button>

                        <span x-text="tab.icon" class="text-2xl"></span>                <button class="nav-btn" data-tab="network">

                        <span x-text="tab.name"></span>                    <span class="nav-icon">ğŸŒ</span>

                    </button>                    <span class="nav-text">Scan RÃ©seau</span>

                </template>                </button>

            </nav>                <button class="nav-btn" data-tab="vpn">

        </aside>                    <span class="nav-icon">ğŸ”’</span>

                            <span class="nav-text">VPN Tailscale</span>

        <!-- Main Content -->                </button>

        <main class="flex-1 p-8 overflow-y-auto">                <button class="nav-btn" data-tab="test">

            <div class="max-w-7xl mx-auto">                    <span class="nav-icon">ğŸ”§</span>

                                    <span class="nav-text">Test API</span>

                <!-- TAB: Status -->                </button>

                <div x-show="currentTab === 'status'" x-cloak class="space-y-6">            </nav>

                    <div class="bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20">        </aside>

                        <h2 class="text-3xl font-bold text-gray-800 mb-2">ğŸ“Š Statut du SystÃ¨me</h2>

                        <p class="text-gray-600">Monitoring en temps rÃ©el de votre infrastructure</p>        <!-- Contenu principal -->

                    </div>        <main class="main-content">

                                <!-- Tab Statut -->

                    <!-- Stats Cards -->            <div id="tab-status" class="tab-content active">

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">                <div class="page-header">

                        <div class="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-6 text-white shadow-xl transform hover:scale-105 transition-transform duration-300">                    <h2>ğŸ“Š Statut du SystÃ¨me</h2>

                            <div class="text-5xl mb-2">ğŸ“±</div>                    <p>Monitoring temps rÃ©el de votre infrastructure</p>

                            <div class="text-4xl font-bold" x-text="stats.total || 0"></div>                </div>

                            <div class="text-indigo-100 text-sm uppercase tracking-wider mt-1">Total Appareils</div>                

                        </div>                <!-- Stats principales -->

                                        <div class="stats-grid">

                        <div class="bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 text-white shadow-xl transform hover:scale-105 transition-transform duration-300">                    <div class="stat-card stat-card--primary">

                            <div class="text-5xl mb-2">âœ…</div>                        <div class="stat-icon">ğŸ“±</div>

                            <div class="text-4xl font-bold" x-text="stats.online || 0"></div>                        <div class="stat-content">

                            <div class="text-green-100 text-sm uppercase tracking-wider mt-1">En Ligne</div>                            <div class="stat-value" id="stat-total-devices">-</div>

                        </div>                            <div class="stat-label">Appareils Total</div>

                                                </div>

                        <div class="bg-gradient-to-br from-red-500 to-pink-600 rounded-2xl p-6 text-white shadow-xl transform hover:scale-105 transition-transform duration-300">                    </div>

                            <div class="text-5xl mb-2">âŒ</div>                    

                            <div class="text-4xl font-bold" x-text="stats.offline || 0"></div>                    <div class="stat-card stat-card--success">

                            <div class="text-red-100 text-sm uppercase tracking-wider mt-1">Hors Ligne</div>                        <div class="stat-icon">âœ…</div>

                        </div>                        <div class="stat-content">

                                                    <div class="stat-value" id="stat-online-devices">-</div>

                        <div class="bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl p-6 text-white shadow-xl transform hover:scale-105 transition-transform duration-300">                            <div class="stat-label">En ligne</div>

                            <div class="text-5xl mb-2">ğŸ¯</div>                        </div>

                            <div class="text-4xl font-bold" x-text="stats.managed || 0"></div>                    </div>

                            <div class="text-blue-100 text-sm uppercase tracking-wider mt-1">GÃ©rÃ©s</div>                    

                        </div>                    <div class="stat-card stat-card--warning">

                    </div>                        <div class="stat-icon">âŒ</div>

                                            <div class="stat-content">

                    <!-- System Health -->                            <div class="stat-value" id="stat-offline-devices">-</div>

                    <div class="bg-white/95 backdrop-blur-xl rounded-2xl shadow-xl p-6 border border-white/20">                            <div class="stat-label">Hors ligne</div>

                        <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ  Ã‰tat du SystÃ¨me</h3>                        </div>

                        <div class="space-y-3">                    </div>

                            <div class="flex justify-between items-center p-4 bg-gray-50 rounded-xl">                    

                                <span class="text-gray-700 font-medium">Serveur 333HOME</span>                    <div class="stat-card stat-card--info">

                                <span class="px-4 py-2 bg-green-100 text-green-700 rounded-full font-semibold" x-text="health.status || 'Chargement...'"></span>                        <div class="stat-icon">ğŸ¯</div>

                            </div>                        <div class="stat-content">

                            <div class="flex justify-between items-center p-4 bg-gray-50 rounded-xl">                            <div class="stat-value" id="stat-managed-devices">-</div>

                                <span class="text-gray-700 font-medium">Base de DonnÃ©es</span>                            <div class="stat-label">GÃ©rÃ©s</div>

                                <span class="px-4 py-2 bg-green-100 text-green-700 rounded-full font-semibold">OpÃ©rationnel</span>                        </div>

                            </div>                    </div>

                        </div>                </div>

                    </div>                

                </div>                <!-- Informations systÃ¨me -->

                                <div class="status-cards">

                <!-- TAB: Devices -->                    <div class="card">

                <div x-show="currentTab === 'devices'" x-cloak class="space-y-6">                        <h3>ğŸ  Serveur 333HOME</h3>

                    <div class="bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20">                        <div id="app-status">

                        <div class="flex justify-between items-center">                            <div class="status-item">

                            <div>                                <span class="status-label">Ã‰tat:</span>

                                <h2 class="text-3xl font-bold text-gray-800 mb-2">ğŸ“± Appareils GÃ©rÃ©s</h2>                                <span class="status-value" id="app-health-status">Chargement...</span>

                                <p class="text-gray-600">GÃ©rez vos appareils connectÃ©s</p>                            </div>

                            </div>                        </div>

                            <button                     </div>

                                @click="loadDevices()"                    

                                class="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300"                    <div class="card">

                            >                        <h3>ğŸ“¡ Base de DonnÃ©es</h3>

                                ğŸ”„ Actualiser                        <div id="db-status">

                            </button>                            <div class="status-item">

                        </div>                                <span class="status-label">Fichier:</span>

                    </div>                                <span class="status-value">devices_unified.json</span>

                                                </div>

                    <!-- Devices Grid -->                            <div class="status-item">

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">                                <span class="status-label">Ã‰tat:</span>

                        <template x-for="device in devices" :key="device.ip">                                <span class="status-value" id="db-health-status">Chargement...</span>

                            <div class="bg-white/95 backdrop-blur-xl rounded-2xl shadow-xl p-6 border border-white/20 transform hover:scale-102 transition-all duration-300">                            </div>

                                <div class="flex justify-between items-start mb-4">                        </div>

                                    <div>                    </div>

                                        <h3 class="text-xl font-bold text-gray-800" x-text="device.name || device.hostname || device.ip"></h3>                </div>

                                        <p class="text-gray-500 text-sm" x-text="device.ip"></p>            </div>

                                    </div>

                                    <span             <!-- Tab Appareils -->

                                        :class="device.status === 'online' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'"            <div id="tab-devices" class="tab-content">

                                        class="px-3 py-1 rounded-full text-sm font-semibold"                <div class="page-header">

                                        x-text="device.status === 'online' ? 'âœ… En ligne' : 'âŒ Hors ligne'"                    <h2>ğŸ“± Appareils GÃ©rÃ©s</h2>

                                    ></span>                    <p>Appareils ajoutÃ©s Ã  votre parc informatique avec fonctionnalitÃ©s avancÃ©es</p>

                                </div>                </div>

                                                

                                <div class="space-y-2 mb-4">                <div class="devices-actions">

                                    <div class="flex justify-between text-sm" x-show="device.mac">                    <button class="btn btn-primary" id="refresh-devices">ğŸ”„ Actualiser</button>

                                        <span class="text-gray-600">MAC:</span>                    <button class="btn btn-success" id="add-device">â• Ajouter Appareil</button>

                                        <span class="text-gray-800 font-mono" x-text="device.mac"></span>                    <!-- Bouton Sync VPN supprimÃ© - sync automatique maintenant -->

                                    </div>                </div>

                                    <div class="flex justify-between text-sm" x-show="device.manufacturer">                

                                        <span class="text-gray-600">Fabricant:</span>                <div class="devices-container">

                                        <span class="text-gray-800" x-text="device.manufacturer"></span>                    <div id="devices-list">

                                    </div>                        <div class="card">

                                </div>                            <p class="empty-state">ğŸ” Aucun appareil gÃ©rÃ©. Utilisez le scan rÃ©seau pour dÃ©couvrir et ajouter des appareils.</p>

                                                        </div>

                                <div class="flex gap-2">                    </div>

                                    <button                 </div>

                                        x-show="device.managed"            </div>

                                        @click="removeDevice(device.ip)"

                                        class="flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors duration-200"            <!-- Tab Scan RÃ©seau -->

                                    >            <div id="tab-network" class="tab-content">

                                        ğŸ—‘ï¸ Retirer                <div class="page-header">

                                    </button>                    <h2>ğŸŒ Scan RÃ©seau</h2>

                                    <button                     <p>DÃ©couverte automatique des appareils sur votre rÃ©seau local</p>

                                        x-show="!device.managed"                </div>

                                        @click="addDevice(device.ip)"                

                                        class="flex-1 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors duration-200"                <!-- Informations dernier scan -->

                                    >                <div class="scan-info-section">

                                        â• GÃ©rer                    <div class="card">

                                    </button>                        <h3>ğŸ“Š Informations de Scan</h3>

                                </div>                        <div id="scan-info-content">

                            </div>                            <div class="loading">ğŸ”„ Chargement des informations...</div>

                        </template>                        </div>

                    </div>                    </div>

                                    </div>

                    <div x-show="devices.length === 0" class="bg-white/95 backdrop-blur-xl rounded-2xl shadow-xl p-12 text-center border border-white/20">                

                        <div class="text-6xl mb-4">ğŸ”</div>                <div class="network-controls">

                        <h3 class="text-2xl font-bold text-gray-800 mb-2">Aucun appareil</h3>                    <button class="btn btn-primary" id="start-scan">ğŸ” Lancer Scan</button>

                        <p class="text-gray-600 mb-6">Lancez un scan rÃ©seau pour dÃ©couvrir des appareils</p>                    <button class="btn btn-secondary" id="stop-scan" disabled>â¹ï¸ ArrÃªter</button>

                        <button                     <button class="btn btn-outline" id="show-history" onclick="app.toggleNetworkHistory()">ğŸ“‹ Historique RÃ©seau</button>

                            @click="switchTab('network')"                    <div class="scan-progress" id="scan-progress" style="display: none;">

                            class="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300"                        <div class="progress-bar">

                        >                            <div class="progress-fill" id="progress-fill"></div>

                            ğŸŒ Scanner le RÃ©seau                        </div>

                        </button>                        <span id="scan-status">Scan en cours...</span>

                    </div>                    </div>

                </div>                </div>

                                

                <!-- TAB: Network -->                <!-- Section Historique RÃ©seau -->

                <div x-show="currentTab === 'network'" x-cloak class="space-y-6">                <div class="network-history-section" id="network-history-section" style="display: none;">

                    <div class="bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20">                    <div class="card">

                        <div class="flex justify-between items-center">                        <h3>ğŸ“‹ Historique des Appareils RÃ©seau</h3>

                            <div>                        <div class="history-tabs">

                                <h2 class="text-3xl font-bold text-gray-800 mb-2">ğŸŒ Scan RÃ©seau</h2>                            <button class="tab-btn active" onclick="app.showHistoryTab('devices')">ğŸ–¥ï¸ Appareils</button>

                                <p class="text-gray-600">DÃ©couverte automatique des appareils</p>                            <button class="tab-btn" onclick="app.showHistoryTab('events')">ğŸ“… Ã‰vÃ©nements</button>

                            </div>                        </div>

                            <button                         

                                @click="startScan()"                        <div id="history-devices" class="history-tab-content active">

                                :disabled="scanning"                            <div class="loading">ğŸ”„ Chargement de l'historique...</div>

                                :class="scanning ? 'opacity-50 cursor-not-allowed' : 'hover:scale-105'"                        </div>

                                class="px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transform transition-all duration-300"                        

                            >                        <div id="history-events" class="history-tab-content" style="display: none;">

                                <span x-show="!scanning">ğŸ” Lancer Scan</span>                            <div class="loading">ğŸ”„ Chargement des Ã©vÃ©nements...</div>

                                <span x-show="scanning">â³ Scan en cours...</span>                        </div>

                            </button>                    </div>

                        </div>                </div>

                    </div>                

                                    <!-- Appareils rÃ©cemment dÃ©connectÃ©s -->

                    <div x-show="scanning" class="bg-white/95 backdrop-blur-xl rounded-2xl shadow-xl p-8 text-center border border-white/20">                <div class="disconnected-section" id="disconnected-section" style="display: none;">

                        <div class="animate-spin text-6xl mb-4">ğŸ”„</div>                    <div class="card">

                        <p class="text-xl font-semibold text-gray-800">Scan du rÃ©seau en cours...</p>                        <h3>ğŸ“µ Appareils RÃ©cemment DÃ©connectÃ©s</h3>

                        <p class="text-gray-600 mt-2">Cela peut prendre quelques instants</p>                        <div id="disconnected-devices">

                    </div>                            <div class="loading">ğŸ”„ Chargement...</div>

                </div>                        </div>

                                    </div>

                <!-- TAB: VPN -->                </div>

                <div x-show="currentTab === 'vpn'" x-cloak class="space-y-6">                

                    <div class="bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20">                <div class="network-results">

                        <h2 class="text-3xl font-bold text-gray-800 mb-2">ğŸ”’ VPN Tailscale</h2>                    <div id="network-devices">

                        <p class="text-gray-600">Gestion de votre rÃ©seau VPN</p>                        <div class="card">

                    </div>                            <p class="empty-state">ğŸ¯ Cliquez sur "Lancer Scan" pour dÃ©couvrir les appareils rÃ©seau</p>

                </div>                        </div>

                                    </div>

                <!-- TAB: Test -->                </div>

                <div x-show="currentTab === 'test'" x-cloak class="space-y-6">            </div>

                    <div class="bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20">

                        <h2 class="text-3xl font-bold text-gray-800 mb-2">ğŸ”§ Test API</h2>            <!-- Tab VPN Tailscale -->

                        <p class="text-gray-600">Testez les endpoints de l'API</p>            <!-- Tab VPN Unified - Interface cohÃ©rente avec les autres onglets -->

                    </div>            <div id="tab-vpn" class="tab-content">

                </div>                <div class="page-header">

                                    <h2>ğŸ”’ VPN Tailscale</h2>

            </div>                    <p>Gestion et monitoring de votre rÃ©seau Tailscale</p>

        </main>                </div>

    </div>                

                    <div class="devices-actions">

    <script>                    <button class="btn btn-primary" id="refresh-tailscale">ğŸ”„ Actualiser</button>

        function app() {                    <button class="btn btn-secondary" id="tailscale-settings">âš™ï¸ Configuration</button>

            return {                </div>

                currentTab: 'status',

                tabs: [                <!-- Configuration API (masquÃ©e par dÃ©faut) -->

                    { id: 'status', name: 'Statut', icon: 'ğŸ“Š' },                <div class="card" id="vpn-config-section" style="display: none;">

                    { id: 'devices', name: 'Appareils', icon: 'ğŸ“±' },                    <h3>âš™ï¸ Configuration API</h3>

                    { id: 'network', name: 'Scan RÃ©seau', icon: 'ğŸŒ' },                    <form id="tailscale-config-form">

                    { id: 'vpn', name: 'VPN', icon: 'ğŸ”’' },                        <div class="form-group">

                    { id: 'test', name: 'Test API', icon: 'ğŸ”§' }                            <label>ï¿½ ClÃ© API Tailscale</label>

                ],                            <input type="password" id="tailscale-api-key" class="form-control" 

                stats: {},                                   placeholder="tskey-api-...">

                health: {},                            <small>Obtenez votre clÃ© sur https://login.tailscale.com/admin/settings/keys</small>

                devices: [],                        </div>

                scanning: false,                        <div class="form-group">

                                            <label>ğŸ¢ Tailnet (Organisation)</label>

                async init() {                            <input type="text" id="tailscale-tailnet" class="form-control" 

                    console.log('ğŸš€ 333HOME v6.0 - Alpine + Tailwind');                                   placeholder="tail12345.ts.net ou votre@email.com">

                    await this.loadStats();                            <small>Format: tail&lt;hash&gt;.ts.net (visible dans Admin â†’ Settings) ou votre email pour compte personnel</small>

                    await this.loadHealth();                        </div>

                    await this.loadDevices();                        <button type="submit" class="btn btn-primary">ğŸ’¾ Sauvegarder</button>

                },                    </form>

                                </div>

                switchTab(tab) {

                    this.currentTab = tab;                <!-- Statistiques - utilise les mÃªmes classes que l'onglet Status -->

                    console.log('ğŸ”„ Tab:', tab);                <div class="status-grid">

                                        <div class="card">

                    // Load content on tab switch                        <h3 id="total-devices">-</h3>

                    if (tab === 'devices') this.loadDevices();                        <p>Appareils Total</p>

                },                    </div>

                                    <div class="card online">

                async loadStats() {                        <h3 id="online-devices">-</h3>

                    try {                        <p>En Ligne</p>

                        const res = await fetch('/api/hub/stats');                    </div>

                        const data = await res.json();                    <div class="card offline">

                        this.stats = data.devices || {};                        <h3 id="offline-devices">-</h3>

                    } catch (err) {                        <p>Hors Ligne</p>

                        console.error('âŒ Stats:', err);                    </div>

                    }                    <div class="card">

                },                        <h3 id="last-sync">-</h3>

                                        <p>DerniÃ¨re Synch</p>

                async loadHealth() {                    </div>

                    try {                </div>

                        const res = await fetch('/api/hub/health');                

                        const data = await res.json();                <!-- Liste des appareils - utilise les mÃªmes classes que l'onglet Devices -->

                        this.health = data;                <div class="devices-container">

                    } catch (err) {                    <div class="card">

                        console.error('âŒ Health:', err);                        <h3>ğŸŒ Appareils Tailscale</h3>

                    }                        <div id="tailscale-devices">

                },                            <div class="loading">ğŸ”„ Chargement des appareils Tailscale...</div>

                                        </div>

                async loadDevices() {                    </div>

                    try {                </div>

                        const res = await fetch('/api/hub/devices');

                        const data = await res.json();                <!-- Routes - section repliable/dÃ©pliable -->

                        this.devices = data.devices || [];                <div class="devices-container">

                        console.log('ğŸ“± Devices loaded:', this.devices.length);                    <div class="card">

                    } catch (err) {                        <h3>ğŸ›£ï¸ Routes Subnet <button class="btn btn-small" onclick="app.toggleSection('routes-section')">ğŸ‘ï¸</button></h3>

                        console.error('âŒ Devices:', err);                        <div id="routes-section" style="display: none;">

                    }                            <p>Configuration des routes pour accÃ©der aux rÃ©seaux locaux via Tailscale.</p>

                },                            <div id="tailscale-routes">

                                                <div class="loading">ğŸ”„ Chargement des routes...</div>

                async addDevice(ip) {                            </div>

                    try {                        </div>

                        await fetch('/api/devices', {                    </div>

                            method: 'POST',                </div>

                            headers: {'Content-Type': 'application/json'},

                            body: JSON.stringify({ip, managed: true})                <!-- ACL - section repliable/dÃ©pliable -->

                        });                <div class="devices-container">

                        await this.loadDevices();                    <div class="card">

                    } catch (err) {                        <h3>ğŸ›¡ï¸ ContrÃ´le d'AccÃ¨s (ACL) <button class="btn btn-small" onclick="app.toggleSection('acl-section')">ğŸ‘ï¸</button></h3>

                        alert('Erreur: ' + err.message);                        <div id="acl-section" style="display: none;">

                    }                            <p>RÃ¨gles de sÃ©curitÃ© et politique d'accÃ¨s du rÃ©seau Tailscale.</p>

                },                            <div id="tailscale-acl">

                                                <div class="loading">ğŸ”„ Chargement des rÃ¨gles...</div>

                async removeDevice(ip) {                            </div>

                    if (!confirm(`Retirer ${ip} ?`)) return;                        </div>

                    try {                    </div>

                        await fetch(`/api/devices/${ip}`, {method: 'DELETE'});                </div>

                        await this.loadDevices();            </div>

                    } catch (err) {

                        alert('Erreur: ' + err.message);            <!-- Tab Test -->

                    }            <div id="tab-test" class="tab-content">

                },                <h2>ğŸ”§ Test API</h2>

                                <div class="test-container">

                async startScan() {                    <button id="test-get" class="btn">Test GET</button>

                    this.scanning = true;                    <button id="test-post" class="btn">Test POST</button>

                    try {                    <div id="test-results"></div>

                        await fetch('/api/hub/scan', {method: 'POST'});                </div>

                        await new Promise(r => setTimeout(r, 3000)); // Wait 3s            </div>

                        await this.loadDevices();        </main>

                        await this.loadStats();

                    } catch (err) {        <!-- Pied de page -->

                        alert('Erreur scan: ' + err.message);        <footer class="footer">

                    } finally {            <div class="footer-content">

                        this.scanning = false;                <span>333HOME v4.0.0 - Architecture Modulaire</span>

                    }                <span id="connection-status">ğŸŸ¢ ConnectÃ©</span>

                }            </div>

            }        </footer>

        }    </div>

    </script></body>

</body></html>
</html>
